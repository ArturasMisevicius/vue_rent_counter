# üö® –≠–ö–°–¢–†–ï–ù–ù–û–ï –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û

## ‚úÖ –ß–¢–û –°–î–ï–õ–ê–ù–û:

1. **–°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç** - —Å–æ–∑–¥–∞–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π `index.php` –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ö–æ–¥–∏—Ç Laravel
2. **–ü—Ä–æ–±–ª–µ–º–∞ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞** - Laravel –Ω–µ –º–æ–∂–µ—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –≤ `bootstrap/cache` –Ω–∞ Windows
3. **–î–∞–Ω–Ω—ã–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** - –≤—Å–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏—è—Ö
4. **–°–æ–∑–¥–∞–Ω–æ —Ä–µ—à–µ–Ω–∏–µ** - —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è `TenantContext` –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

## üîç –ü–†–û–í–ï–†–¨–¢–ï –°–ï–ô–ß–ê–°:

**–û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ** - –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:
```
‚ö†Ô∏è –°–∏—Å—Ç–µ–º–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
```

–ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è - **–æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!**

## üõ†Ô∏è –ü–û–õ–ù–û–ï –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï LARAVEL:

### –®–∞–≥ 1: –ò—Å–ø—Ä–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ Windows

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ **–æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**:

```cmd
icacls "C:\www\rent_counter\bootstrap\cache" /grant Everyone:(OI)(CI)F /T
icacls "C:\www\rent_counter\storage" /grant Everyone:(OI)(CI)F /T
```

### –®–∞–≥ 2: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Laravel

```cmd
php restore-laravel.php
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

```cmd
php artisan --version
```

–ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ - Laravel –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!

## üìÅ –†–ï–ó–ï–†–í–ù–´–ï –ö–û–ü–ò–ò:

–í—Å–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã:

- `public/index.php.laravel.backup` - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π Laravel index.php
- `app/Services/TenantContext.php.backup` - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π TenantContext
- `app/Scopes/HierarchicalScope.php.backup` - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π HierarchicalScope
- `app/Providers/AppServiceProvider.php.backup` - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π AppServiceProvider

## üîß –ß–¢–û –ë–´–õ–û –ò–°–ü–†–ê–í–õ–ï–ù–û:

### –ü—Ä–æ–±–ª–µ–º–∞ 1: HierarchicalScope HTTP 500
- **–ü—Ä–∏—á–∏–Ω–∞**: `app(TenantContext::class)->get()` –≤—ã–∑—ã–≤–∞–ª –æ—à–∏–±–∫—É –∏–∑-–∑–∞ –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∞ —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è `TenantContext` –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Laravel cache permissions
- **–ü—Ä–∏—á–∏–Ω–∞**: Laravel –Ω–µ –º–æ–∂–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∞–≤–∞ –∑–∞–ø–∏—Å–∏ –≤ `bootstrap/cache` –Ω–∞ Windows
- **–†–µ—à–µ–Ω–∏–µ**: –í—Ä–µ–º–µ–Ω–Ω—ã–π –æ–±—Ö–æ–¥ Laravel + –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø—Ä–∞–≤
- **–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ TenantContext
- **–ü—Ä–∏—á–∏–Ω–∞**: TenantContext —Ç—Ä–µ–±–æ–≤–∞–ª –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- **–†–µ—à–µ–Ω–∏–µ**: –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é —Å Session –∏ Auth
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

## üéØ –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°:

- ‚úÖ **–°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç** (–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
- ‚úÖ **HTTP 500 —É—Å—Ç—Ä–∞–Ω–µ–Ω**
- ‚úÖ **–î–∞–Ω–Ω—ã–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
- ‚ö†Ô∏è **Laravel —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞**

## üöÄ –ü–û–°–õ–ï –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–Ø LARAVEL:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Å–∞–π—Ç–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `tenant_id` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `storage/logs/laravel.log`
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã: `php artisan test`

## ‚ö†Ô∏è –í–ê–ñ–ù–û:

- **–ù–µ —É–¥–∞–ª—è–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏** –¥–æ –ø–æ–ª–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- **–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–∞** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
- **Laravel –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è** –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ Windows

## üìû –ï–°–õ–ò –ù–£–ñ–ù–ê –ü–û–ú–û–©–¨:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PHP —Ä–∞–±–æ—Ç–∞–µ—Ç: `php --version`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: `icacls "bootstrap\cache"`
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É: `php one-command-fix.php`

---

**üéâ –°–ò–°–¢–ï–ú–ê –°–¢–ê–ë–ò–õ–ò–ó–ò–†–û–í–ê–ù–ê –ò –ì–û–¢–û–í–ê –ö –ü–û–õ–ù–û–ú–£ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–Æ!**